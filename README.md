[![Build status](https://ci.appveyor.com/api/projects/status/b6xxowckxi7kr58t?svg=true)](https://ci.appveyor.com/project/Elena-Yakovleva/javaselenide)

### Домашнее задание к занятию «2.2. Selenide»

#### Настройка
1. Целевой сервис
   Файл целевого сервиса расположен в файле app-card-delivery.jar 
2. build.gradle

   Файл build.gradle в проектах на базе Selenide должен выглядеть следующим образом:
````
plugins {
   id 'java'
}

group 'ru.netology'
version '1.0-SNAPSHOT'

sourceCompatibility = 17

// кодировка файлов (если используете русский язык в файлах)
compileJava.options.encoding = "UTF-8"
compileTestJava.options.encoding = "UTF-8"

repositories {
   mavenCentral()
}

dependencies {
   testImplementation 'org.junit.jupiter:junit-jupiter:5.6.1'
   testImplementation 'com.codeborne:selenide:6.17.2'
}

test {
   useJUnitPlatform()
   // в тестах, вызывая `gradlew test -Dselenide.headless=true` будем передавать этот параметр в JVM (где его подтянет Selenide)
   // свойство selenide.headless используется в проектах на основе Selenide для передачи значения параметра в JVM
   systemProperty 'selenide.headless', System.getProperty('selenide.headless')
   // свойство chromeoptions.prefs используется для задания настроек браузера в проектах на основе Selenide, выключаем менеджер паролей
   systemProperty 'chromeoptions.prefs', System.getProperty('chromeoptions.prefs', "profile.password_manager_leak_detection=false")
}

````
3. .appveyor.yml

   Команда запуска SUT в секции install будет выглядеть следующим образом
````
- java -jar ./artifacts/app-card-delivery.jar &
````
  Кроме этого тесты нужно запускать так, чтобы Selenide запускал браузер в headless-режиме.

  Секция build_script для включения headless режима будет выглядеть так
````
build_script:
- ./gradlew test --info -Dselenide.headless=true
````


#### Задача №1: заказ доставки карты
Вам необходимо автоматизировать тестирование формы заказа доставки карты:
![](https://github.com/netology-code/aqa-homeworks/raw/master/selenide/pic/order.png)

Требования к содержимому полей:

1. Город — один из административных центров субъектов РФ.
2. Дата — не ранее трёх дней с текущей даты.
3. В поле фамилии и имени разрешены только русские буквы, дефисы и пробелы.
4. В поле телефона — только 11 цифр, символ + на первом месте.
5. Флажок согласия должен быть выставлен.

Тестируемая функциональность: отправка формы.

Поля «Город» и «Дата» заполняются через прямой ввод значений без использования выбора из выпадающего списка и всплывающего календаря.

**Условия: если все поля заполнены корректно, то форма переходит в состояние загрузки:**

![](https://github.com/netology-code/aqa-homeworks/raw/master/selenide/pic/loading.png)

Важно: состояние загрузки не должно длиться более 15 секунд.

После успешной отправки формы появится всплывающее окно об успешном завершении бронирования:

![](https://github.com/netology-code/aqa-homeworks/raw/master/selenide/pic/popup.png)

Вам необходимо самостоятельно изучить элементы на странице, чтобы подобрать правильные селекторы. Обратите внимание, что элементы могут быть как скрыты, так и динамически добавляться или удаляться из DOM.

Подсказка

<details>
Важно: Дата и время всегда будут уязвимым местом ваших тестов.
</details>

Ключевая ловушка в том, что, если вы их захардкодите, то тест, который работал сегодня, уже может не работать завтра, через неделю, месяц, потому что дата может перейти в разряд условного прошлого для приложения и стать невалидной.
Кроме того, дата и время — это одно из немногих мест в тестах, где вам иногда придётся писать логику.

Для решения данной задачи тоже будет необходимо выполнить генерацию даты согласно требований, описанных в условии.

Рекомендуем для генерации строки с датой использовать класс LocalDate, имеющий все необходимые инструменты:

* метод now() этого класса вернет вам текущую дату
* plusDays(long daysToAdd) умеет добавлять к дате указанное количество дней
* format(DateTimeFormatter formatter) выполнит форматирование даты из типа LocalDate в String используя переданный аргументом DateTimeFormatter

Подсказка

<details>

Поле ввода, которое необходимо заполнить в рамках сценария может быть заполнено значением по-умолчанию.

Для заполнения такого поля вам придется его предварительно очистить. При этом метод clear() работает далеко не на всех формах.
В таком случае вам придётся повторить действия пользователя на странице.

Содержимое поля необходимо выделить и послать нажатие кнопок для удаления текста в поле.
Нажатие клавиш умеет посылать метод sendKeys(CharSequence... keysToSend), а необходимые клавиши вы найдете в енаме Keys.
Выделить текст можно двойным кликом или сочетанием клавиш.

</details>

### Задача №2: взаимодействие с комплексными элементами (необязательная)
Большинство систем старается помогать пользователям ускорить выполнение операций: для этого предоставляются формы с автодополнением и элементы вроде календарей.

Проверьте отправку формы, используя следующие условия:

1. Ввод двух букв в поле «Город», после чего выбор нужного города из выпадающего списка:

![](https://github.com/netology-code/aqa-homeworks/raw/master/selenide/pic/dropdown.png)

2. Выбор даты на неделю вперёд, начиная от текущей даты, через инструмент календаря:

![](https://github.com/netology-code/aqa-homeworks/raw/master/selenide/pic/calendar.png)

Важно: предлагаемая вам задача действительно сложная и потребует от вас достаточно много усилий для решения. Именно поэтому мы перенесли её в разряд необязательных.

P.S. Стоит отметить, что перед автоматизацией вы должны попробовать оценить стоимость автоматизации, в неё же входит и сложность. Но оценивать вы не научитесь, не попробовав автоматизировать.